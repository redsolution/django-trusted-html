h1. Install

h2. Required

django-url-methods
django-model-url (optional)

h2. Buildout

<pre>
[buildout]
parts = ...
        django-url-methods
        django-model-url
        django-trusted-html
        
[django]
...
extra-paths = ...
              ${django-url-methods:location}
              ${django-model-url:location}
              ${django-trusted-html:location}

[django-url-methods]
recipe = zerokspot.recipe.git
repository = ssh://verne.redsolution.ru/srv/git/django-url-methods.git

[django-model-url]
recipe = zerokspot.recipe.git
repository = ssh://verne.redsolution.ru/srv/git/django-model-url.git

[django-trusted-html]
recipe = zerokspot.recipe.git
repository = ssh://verne.redsolution.ru/srv/git/django-trusted-html.git
</pre>

h2. settings.py

<pre>
INSTALLED_APPS = (
...
    'trustedhtml',
)
...
</pre>

h2. myapp/models.py

<pre>
from trustedhtml import pretty

class MyModel(models.Model):
    content = models.TextField()
    ...
    def save(self, *args, **kwargs):
        content = pretty.validate(content)
        super(MyModel, self).save(*args, **kwargs)
</pre>

Or using signals:

<pre>
from trustedhtml import pretty
from someapp.models import SomeModel

def pretty_save(sender, instance, **kwargs):
    instance.content = pretty.validate(instance.content)

pre_save.connect(content_save, sender=SomeModel)
</pre>
